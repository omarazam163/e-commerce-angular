<div class="flex px-4">
    <aside class="w-72 transition-transform hidden sm:block mt-7" aria-label="Sidebar">
        <div class="px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800">
            <ul class="space-y-2 font-medium">
                <li>
                    <label for="default-search"
                        class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                            </svg>
                        </div>
                        <input type="search" id="default-search"
                            class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                            required [(ngModel)]="searchWord" />
                    </div>
                </li>
                <li>
                    @if (isbrower) {
                    <p class="mb-3">price</p>
                    <ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="options"></ngx-slider>
                    }
                </li>
                <li class="pt-9">
                    <p class="mb-3">categories</p>
                    <div class="flex items-center mb-4">
                        <input id="default-radio-1" type="radio" value="all" name="category+'-'+all+'-side" [(ngModel)]="SelectedCat"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="default-radio-1"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">all</label>
                    </div>
                    @for (item of Categories(); track $index) {
                    <div class="flex items-center mb-4">
                        <input id="default-radio-1" type="radio" [value]="item.name" name="category+'-'+item.name+'-side"
                            [(ngModel)]="SelectedCat"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="default-radio-1"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{item.name}}</label>
                    </div>
                    }
                </li>
                <li>
                    <p class="mb-3">brands</p>
                    <div class="flex items-center mb-4">
                        <input id="default-radio-1" type="radio" value="all" name="brands-all-side" [(ngModel)]="selectedBrand"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="default-radio-1"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">all</label>
                    </div>
                    @for (item of brands(); track $index) {
                    <div class="flex items-center mb-4">
                        <input id="default-radio-1" type="radio" [value]="item.name" name="brands+'-'+item.name+'-side"
                            [(ngModel)]="selectedBrand"
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="default-radio-1"
                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{item.name}}</label>
                    </div>
                    }
                    <!-- <ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="options"></ngx-slider> -->
                </li>
            </ul>
        </div>
    </aside>

    <div class="p-4 w-full">
        <div id="accordion-collapse" data-accordion="collapse" class="sm:hidden">
            <h2 id="accordion-collapse-heading-1">
                <button type="button"
                    class="flex items-center justify-between w-full p-5 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-t-xl focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 gap-3"
                    (click)="accordion.set(!accordion())"
                    >
                    <span>filter</span>
                    <svg  class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 5 5 1 1 5" />
                    </svg>
                </button>
            </h2>
            <div  [class.hidden]="accordion()">
                <ul class="space-y-2 font-medium mt-6">
                    <li>
                        <label for="default-search"
                            class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                                </svg>
                            </div>
                            <input type="search" id="default-search"
                                class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                required [(ngModel)]="searchWord" />
                        </div>
                    </li>
                    <li>
                        @if (isbrower) {
                        <p class="mb-3">price</p>
                        <ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="options"></ngx-slider>
                        }
                    </li>
                    <li class="pt-9">
                        <p class="mb-3">categories</p>
                        <div class="flex items-center mb-4">
                            <input id="default-radio-1" type="radio" value="all" name="category-all"
                            [ngModel]="SelectedCat()" (ngModelChange)="SelectedCat.set($event)"
                                class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="default-radio-1"
                                class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">all</label>
                        </div>
                        @for (item of Categories(); track $index) {
                        <div class="flex items-center mb-4">
                            <input id="default-radio-1" type="radio" [value]="item.name" name="category+'-'+item.name"
                                [ngModel]="SelectedCat()" (ngModelChange)="SelectedCat.set($event)"
                                class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label [for]="item.name"
                                class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{item.name}}</label>
                        </div>
                        }
                    </li>
                    <li>

                        <p class="mb-3">brands</p>
                        
                        <!-- Default "All" option -->
                        <div class="flex items-center mb-4">
                            <input id="brand-all" type="radio" value="all" name="brands-all" [(ngModel)]="selectedBrand"
                                class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="brand-all" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">All</label>
                        </div>
                        
                        <!-- Dynamic brands -->
                        @for (item of brands(); track item._id) {
                        <div class="flex items-center mb-4">
                            <!-- Generate unique id -->
                            <input id="brand-{{ $index }}" type="radio" [value]="item.name+'-'+item.name" name="brands" [(ngModel)]="selectedBrand"
                                class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="brand-{{ $index }}" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">
                                {{ item.name }}
                            </label>
                        </div>
                        }
                        <!-- <ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="options"></ngx-slider> -->
                    </li>
                </ul>
            </div>
        </div>
        @if (products().length!=0) {
        <div class="flex w-full flex-wrap">
            @for (item of products()|searchPipe:searchWord():SelectedCat():selectedBrand():minValue:maxValue ; track item._id) {

            <div class="w-full md:w-1/2 lg:w-1/3 p-3">
                <app-card [islogin]="islogin()" [inWishlist]="wishList.has(item._id)" [item]="item"
                    (AddToWishListSet)="WishListEcentHandler($event)"></app-card>
            </div>
            }
            @empty {
            <div class="text-center w-full flex justify-center flex-col items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="50%" height="50%" enable-background="new 0 0 32 32"
                    viewBox="0 0 32 32" id="unhappy-result">
                    <path fill="#263238"
                        d="M17.5 13c.27 0 .5.23.5.5S17.77 14 17.5 14 17 13.77 17 13.5 17.23 13 17.5 13zM8.5 13C8.77 13 9 13.23 9 13.5S8.77 14 8.5 14 8 13.77 8 13.5 8.23 13 8.5 13z">
                    </path>
                    <g>
                        <path fill="#455A64"
                            d="M23.43,23.901c-0.128,0-0.256-0.049-0.354-0.146l-2.216-2.216c-0.195-0.195-0.195-0.512,0-0.707
                                s0.512-0.195,0.707,0l2.216,2.216c0.195,0.195,0.195,0.512,0,0.707C23.686,23.853,23.558,23.901,23.43,23.901z">
                        </path>
                        <path fill="#455A64"
                            d="M28.5 31c-.667 0-1.295-.26-1.768-.732l-3.5-3.5C22.76 26.295 22.5 25.668 22.5 25s.26-1.295.732-1.768c.906-.906 2.629-.906 3.535 0l3.5 3.5C30.74 27.205 31 27.832 31 28.5s-.26 1.295-.732 1.768S29.167 31 28.5 31zM25 23.52c-.407 0-.793.152-1.061.42C23.656 24.223 23.5 24.6 23.5 25s.156.777.439 1.061l3.5 3.5c.567.566 1.554.566 2.121 0C29.844 29.277 30 28.9 30 28.5s-.156-.777-.439-1.061l-3.5-3.5C25.793 23.672 25.407 23.52 25 23.52zM13 25C6.383 25 1 19.617 1 13S6.383 1 13 1s12 5.383 12 12S19.617 25 13 25zM13 2C6.935 2 2 6.935 2 13s4.935 11 11 11 11-4.935 11-11S19.065 2 13 2z">
                        </path>
                        <path fill="#455A64"
                            d="M14 16.021c-.276 0-.5-.224-.5-.5 0-.275-.224-.5-.5-.5s-.5.225-.5.5c0 .276-.224.5-.5.5s-.5-.224-.5-.5c0-.827.673-1.5 1.5-1.5s1.5.673 1.5 1.5C14.5 15.797 14.276 16.021 14 16.021zM17.5 14.5c-.542 0-1-.458-1-1s.458-1 1-1 1 .458 1 1S18.042 14.5 17.5 14.5zM8.5 14.5c-.542 0-1-.458-1-1s.458-1 1-1 1 .458 1 1S9.042 14.5 8.5 14.5z">
                        </path>
                        <g>
                            <path fill="#263238"
                                d="M23.43,23.901c-0.128,0-0.256-0.049-0.354-0.146l-2.216-2.216c-0.195-0.195-0.195-0.512,0-0.707
                                s0.512-0.195,0.707,0l2.216,2.216c0.195,0.195,0.195,0.512,0,0.707C23.686,23.853,23.558,23.901,23.43,23.901z">
                            </path>
                            <path fill="#263238"
                                d="M28.5 31c-.667 0-1.295-.26-1.768-.732l-3.5-3.5C22.76 26.295 22.5 25.668 22.5 25s.26-1.295.732-1.768c.906-.906 2.629-.906 3.535 0l3.5 3.5C30.74 27.205 31 27.832 31 28.5s-.26 1.295-.732 1.768S29.167 31 28.5 31zM25 23.52c-.407 0-.793.152-1.061.42C23.656 24.223 23.5 24.6 23.5 25s.156.777.439 1.061l3.5 3.5c.567.566 1.554.566 2.121 0C29.844 29.277 30 28.9 30 28.5s-.156-.777-.439-1.061l-3.5-3.5C25.793 23.672 25.407 23.52 25 23.52zM13 25C6.383 25 1 19.617 1 13S6.383 1 13 1s12 5.383 12 12S19.617 25 13 25zM13 2C6.935 2 2 6.935 2 13s4.935 11 11 11 11-4.935 11-11S19.065 2 13 2z">
                            </path>
                            <path fill="#263238"
                                d="M14 16.021c-.276 0-.5-.224-.5-.5 0-.275-.224-.5-.5-.5s-.5.225-.5.5c0 .276-.224.5-.5.5s-.5-.224-.5-.5c0-.827.673-1.5 1.5-1.5s1.5.673 1.5 1.5C14.5 15.797 14.276 16.021 14 16.021zM17.5 14.5c-.542 0-1-.458-1-1s.458-1 1-1 1 .458 1 1S18.042 14.5 17.5 14.5zM8.5 14.5c-.542 0-1-.458-1-1s.458-1 1-1 1 .458 1 1S9.042 14.5 8.5 14.5z">
                            </path>
                        </g>
                    </g>
                </svg>
                <h1 class="text-3xl font-bold mb-4 ">No Products</h1>
            </div>
            }
        </div>
        }
        @else {
        <app-loader></app-loader>
        }
    </div>
</div>